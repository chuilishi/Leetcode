# 饥荒联机版服务器

C:\Users\zh148\Documents\Klei\DoNotStarveTogether

(文档文件夹里)

该文件夹中有

![image-20230205120635118](C:\Users\zh148\AppData\Roaming\Typora\typora-user-images\image-20230205120635118.png)

id文件夹

点开就是世界的存档位置

将存档放到外面一层

在存档中放一个



在doNotStarveTogetherServer里面

首先将存档文件夹的mods复制粘贴到server的mods里面(脚本文件也要)

然后打开bin->script->启动文件(.bat)

编辑它

```
@ECHO OFF

set SteamAppId=322330
set SteamGameId=322330

cd ..
start "Don't Starve Together Overworld" /D "%~dp0.." "%~dp0..\dontstarve_dedicated_server_nullrenderer.exe" -Cluster_1-shard Master
start "Don't Starve Together Caves"     /D "%~dp0.." "%~dp0..\dontstarve_dedicated_server_nullrenderer.exe" -Cluster_1-shard Caves

```

其中最后的

 -Cluster_1-shard Master和 -Cluster_1-shard Caves

是我们要修改成的文字

-Cluster表示我们要运行的存档



![img](https://i0.hdslb.com/bfs/article/ae87dc8c2b4dc2d6a35640b824e8ac0a95eb6448.png@942w_540h_progressive.webp)

这个是存档的配置文件

伺服器归类,可以选填:cooperative合作,social社交,competitive竞争,或madness疯狂(没有实质作用,只是让其他人寻找伺服器时大约知道这个伺服主想走什么路

### 常用服务器指令

-console -conf_dir 服务器参数
c_connect("", 10999, "000"):IP端口和密码
TheNet:Kick(userid)--踢出用户ID为“userid”的玩家
TheNet:Ban(userid)--禁止用户ID为“userid”的玩家加入
c_save()--立即保存当前世界（一般会在每天早上自动保存）
c_reset(true) --true保存并重新加载世界；false不保存直接重新加载当前世界。
TheNet:SetAllowIncomingConnections(true|false)--true允许他人加入；

false阻止任何人加入。
c_announce("内容") 公告
TheWorld.net.components.clock:OnUpdate(16*30*60) 跳过时间 X为多少天
TheWorld:PushEvent("ms_nextphase") 跳过时间阶段
TheWorld:PushEvent("ms_forceprecipitation") 开始下雨
TheWorld:PushEvent("ms_forceprecipitation", false) 雨停了

c_sethealth(percent) #设置血量，括号里填百分比，0.9=90% 

c_setsanity(percent) #设置san值，括号里填百分比，0.9=90% 

c_sethunger(percent) #设置饱食度，括号里填百分比，0.9=90% 

c_godmode() #上帝模式 

c_speedmult(multiplier) #设置移动速度，一般1.2足够 c_reset() #在不保存世界的情况下重载，会导致掉线 

c_regenerateworld() #删除当前世界并生成新世界 

c_save() #手动保存 

c_shutdown(true | false) #c_shutdown(true)或c_shutdown()保存游戏并关闭服务器，c_shutdown(false)不保存游戏直接关闭服务器 

c_rollback(count) #回档，count从1开始计算，回到之前保存的状态。



# Linux操作

[(>ω<*)又恢复了~ (smartfox.cc)](https://www.smartfox.cc/archives/48/#morphing)